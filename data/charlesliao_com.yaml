---
classes:
  - role::charlesliao_com

git::configs:
  user.name: Mingchao Liao
  user.email: mingchaoliao95@gmail.com

profile::apache::http::vhosts:
  charlesliao.com nonssl:
    ip: *
    servername: charlesliao.com
    port: 80
    docroot: /var/www/charlesliao
    docroot_owner: www-data
    docroot_group: www-data
    docroot_mode: 0666
    redirect_status: permanent
    redirect_dest: https://charlesliao.com
  charlesliao.com ssl:
    ip: *
    servername: charlesliao.com
    port: 80
    docroot: /var/www/charlesliao
    docroot_owner: www-data
    docroot_group: www-data
    docroot_mode: 0666
    redirect_status: permanent
    redirect_dest: https://charlesliao.com
  api.timeline.charlesliao.com ssl:
    ip: *
    servername: api.timeline.charlesliao.com
    port: 443
    docroot: /var/www/charlesliao
    proxy_dest: http://localhost:5002
    ssl_chain: /etc/letsencrypt/live/charlesliao.com/chain.pem
    ssl_cert: /etc/letsencrypt/live/charlesliao.com/cert.pem
    ssl_key: /etc/letsencrypt/live/charlesliao.com/privkey.pem
  timeline.charlesliao.com ssl:
    ip: *
    servername: timeline.charlesliao.com
    port: 443
    docroot: /var/www/charlesliao
    proxy_dest: http://localhost:5001
    ssl_chain: /etc/letsencrypt/live/charlesliao.com/chain.pem
    ssl_cert: /etc/letsencrypt/live/charlesliao.com/cert.pem
    ssl_key: /etc/letsencrypt/live/charlesliao.com/privkey.pem
  docker.charlesliao.com nonssl:
    ip: *
    servername: docker.charlesliao.com
    docroot: /var/www/charlesliao
    port: 80
    redirect_status: permanent
    redirect_dest: https://docker.charlesliao.com
  docker.charlesliao.com ssl:
    ip: *
    servername: docker.charlesliao.com
    port: 443
    docroot: /var/www/charlesliao
    proxy_dest: http://localhost:5000
    ssl_chain: /etc/letsencrypt/live/charlesliao.com/chain.pem
    ssl_cert: /etc/letsencrypt/live/charlesliao.com/cert.pem
    ssl_key: /etc/letsencrypt/live/charlesliao.com/privkey.pem